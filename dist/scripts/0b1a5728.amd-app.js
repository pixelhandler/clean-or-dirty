var requirejs,require,define;(function(a){function l(a,b){return j.call(a,b)}function m(a,b){var c,d,e,f,g,i,j,k,l,m,n=b&&b.split("/"),o=h.map,p=o&&o["*"]||{};if(a&&a.charAt(0)===".")if(b){n=n.slice(0,n.length-1),a=n.concat(a.split("/"));for(k=0;k<a.length;k+=1){m=a[k];if(m===".")a.splice(k,1),k-=1;else if(m===".."){if(k===1&&(a[2]===".."||a[0]===".."))break;k>0&&(a.splice(k-1,2),k-=2)}}a=a.join("/")}else a.indexOf("./")===0&&(a=a.substring(2));if((n||p)&&o){c=a.split("/");for(k=c.length;k>0;k-=1){d=c.slice(0,k).join("/");if(n)for(l=n.length;l>0;l-=1){e=o[n.slice(0,l).join("/")];if(e){e=e[d];if(e){f=e,g=k;break}}}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,g=j),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function n(b,d){return function(){return c.apply(a,k.call(arguments,0).concat([b,d]))}}function o(a){return function(b){return m(b,a)}}function p(a){return function(b){f[a]=b}}function q(c){if(l(g,c)){var d=g[c];delete g[c],i[c]=!0,b.apply(a,d)}if(!l(f,c)&&!l(i,c))throw new Error("No "+c);return f[c]}function r(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function s(a){return function(){return h&&h.config&&h.config[a]||{}}}var b,c,d,e,f={},g={},h={},i={},j=Object.prototype.hasOwnProperty,k=[].slice;d=function(a,b){var c,d=r(a),e=d[0];return a=d[1],e&&(e=m(e,b),c=q(e)),e?c&&c.normalize?a=c.normalize(a,o(b)):a=m(a,b):(a=m(a,b),d=r(a),e=d[0],a=d[1],e&&(c=q(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},e={require:function(a){return n(a)},exports:function(a){var b=f[a];return typeof b!="undefined"?b:f[a]={}},module:function(a){return{id:a,uri:"",exports:f[a],config:s(a)}}},b=function(b,c,h,j){var k,m,o,r,s,t=[],u;j=j||b;if(typeof h=="function"){c=!c.length&&h.length?["require","exports","module"]:c;for(s=0;s<c.length;s+=1){r=d(c[s],j),m=r.f;if(m==="require")t[s]=e.require(b);else if(m==="exports")t[s]=e.exports(b),u=!0;else if(m==="module")k=t[s]=e.module(b);else if(l(f,m)||l(g,m)||l(i,m))t[s]=q(m);else{if(!r.p)throw new Error(b+" missing "+m);r.p.load(r.n,n(j,!0),p(m),{}),t[s]=f[m]}}o=h.apply(f[b],t);if(b)if(k&&k.exports!==a&&k.exports!==f[b])f[b]=k.exports;else if(o!==a||!u)f[b]=o}else b&&(f[b]=h)},requirejs=require=c=function(f,g,i,j,k){return typeof f=="string"?e[f]?e[f](g):q(d(f,g).f):(f.splice||(h=f,g.splice?(f=g,g=i,i=null):f=a),g=g||function(){},typeof i=="function"&&(i=j,j=k),j?b(a,f,g,i):setTimeout(function(){b(a,f,g,i)},15),c)},c.config=function(a){return h=a,c},define=function(a,b,c){b.splice||(c=b,b=[]),!l(f,a)&&!l(g,a)&&(g[a]=[a,b,c])},define.amd={jQuery:!0}})(),function(){(function(a,b){function ob(a){return new pb(a)}function pb(a){if(a&&a.__wrapped__)return a;this.__wrapped__=a}function Ab(a,b){return function(c,d,e){return a.call(b,c,d,e)}}function Bb(a,b,c){b||(b=0);var d=a.length,e=d-b>=(c||j),f=e?{}:a;if(e){var g,h=b-1;while(++h<d)g=a[h]+"",(z.call(f,g)?f[g]:f[g]=[]).push(a[h])}return function(a){if(e){var c=a+"";return z.call(f,c)&&Kc(f[c],a)>-1}return Kc(f,a,b)>-1}}function Cb(a,c){var d=a.index,e=c.index;a=a.criteria,c=c.criteria;if(a!==c){if(a>c||a===b)return 1;if(a<c||c===b)return-1}return d<e?-1:1}function Db(a,b,c){function g(){var h=arguments,i=e?this:b;d||(a=b[f]),c.length&&(h=h.length?c.concat(C.call(h)):c);if(this instanceof g){Hb.prototype=a.prototype,i=new Hb;var j=a.apply(i,h);return j&&mb[typeof j]?j:i}return a.apply(i,h)}var d=Lb(a),e=!c,f=a;return e&&(c=b),g}function Eb(){var a,b,c,e=-1,f=arguments.length,g={bottom:"",exit:"",init:"",top:"",arrayBranch:{beforeLoop:""},objectBranch:{beforeLoop:""}};while(++e<f){a=arguments[e];for(b in a)c=(c=a[b])==null?"":c,/beforeLoop|inLoop/.test(b)?(typeof c=="string"&&(c={array:c,object:c}),g.arrayBranch[b]=c.array||"",g.objectBranch[b]=c.object||""):g[b]=c}var h=g.args,i=/^[^,]+/.exec(h)[0],j=g.useStrict;g.firstArg=i,g.hasDontEnumBug=X,g.isKeysFast=fb,g.noArgsEnum=$,g.shadowed=w,g.useHas=g.useHas!==!1,g.useStrict=j==null?gb:j,g.noCharByIndex==null&&(g.noCharByIndex=bb),g.exit||(g.exit="if (!"+i+") return result");if(i!="collection"||!g.arrayBranch.inLoop)g.arrayBranch=null;var k=Function("arrayLikeClasses, ArrayProto, bind, bindIterator, compareAscending, concat, forIn, hasOwnProperty, identity, indexOf, isArguments, isArray, isFunction, isPlainObject, objectClass, objectTypes, nativeKeys, propertyIsEnumerable, slice, stringClass, toString","var callee = function("+h+") {\n"+qb(g)+"\n};\n"+"return callee");return k(ib,d,_c,Ab,Cb,y,Sb,z,md,Kc,Jb,Kb,Lb,Nb,S,mb,I,B,C,U,D)}function Fb(a){return"\\"+nb[a]}function Gb(a){return kb[a]}function Hb(){}function Ib(a){return lb[a]}function Jb(a){return D.call(a)==M}function Lb(a){return typeof a=="function"}function Mb(a,b){var c=!1;if(!a||typeof a!="object"||!b&&Jb(a))return c;var d=a.constructor;return(!cb||typeof a.toString=="function"||typeof (a+"")!="string")&&(!Lb(d)||d instanceof d)?Z?(Sb(a,function(a,b,d){return c=!z.call(d,b),!1}),c===!1):(Sb(a,function(a,b){c=b}),c===!1||z.call(a,c)):c}function Pb(a,b,c,d,e){if(a==null)return a;c&&(b=!1);var f=mb[typeof a];if(f){var g=D.call(a);if(!jb[g]||_&&Jb(a))return a;var h=g==N;f=h||(g==S?Nb(a,!0):f)}if(!f||!b)return f?h?C.call(a):Rb({},a):a;var i=a.constructor;switch(g){case O:return new i(a==1);case P:return new i(+a);case R:case U:return new i(a);case T:return i(a.source,q.exec(a))}d||(d=[]),e||(e=[]);var j=d.length;while(j--)if(d[j]==a)return e[j];var k=h?i(j=a.length):{};d.push(a),e.push(k);if(h){var l=-1;while(++l<j)k[l]=Pb(a[l],b,null,d,e)}else Tb(a,function(a,c){k[c]=Pb(a,b,null,d,e)});return k}function Vb(a,b){return a?z.call(a,b):!1}function Xb(a){return a===!0||a===!1||D.call(a)==O}function Yb(a){return D.call(a)==P}function Zb(a){return a?a.nodeType===1:!1}function _b(a,b,c,d){if(a==null||b==null)return a===b;if(a===b)return a!==0||1/a==1/b;if(mb[typeof a]||mb[typeof b])a=a.__wrapped__||a,b=b.__wrapped__||b;var e=D.call(a);if(e!=D.call(b))return!1;switch(e){case O:case P:return+a==+b;case R:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case T:case U:return a==b+""}var f=ib[e];if(_&&!f&&(f=Jb(a))&&!Jb(b))return!1;if(!f&&(e!=S||cb&&(typeof a.toString!="function"&&typeof (a+"")=="string"||typeof b.toString!="function"&&typeof (b+"")=="string")))return!1;c||(c=[]),d||(d=[]);var g=c.length;while(g--)if(c[g]==a)return d[g]==b;var h=-1,i=!0,j=0;c.push(a),d.push(b);if(f){j=a.length,i=j==b.length;if(i)while(j--)if(!(i=_b(a[j],b[j],c,d)))break;return i}var k=a.constructor,l=b.constructor;if(k!=l&&!(Lb(k)&&k instanceof k&&Lb(l)&&l instanceof l))return!1;for(var m in a)if(z.call(a,m)){j++;if(!z.call(b,m)||!_b(a[m],b[m],c,d))return!1}for(m in b)if(z.call(b,m)&&!(j--))return!1;if(X)while(++h<7){m=w[h];if(z.call(a,m)&&(!z.call(b,m)||!_b(a[m],b[m],c,d)))return!1}return!0}function ac(a){return H(a)&&D.call(a)==R}function bc(a){return a?mb[typeof a]:!1}function cc(a){return D.call(a)==R&&a!=+a}function dc(a){return a===null}function ec(a){return D.call(a)==R}function fc(a){return D.call(a)==T}function gc(a){return D.call(a)==U}function hc(a){return a===b}function zc(a,b,c,d){if(!a)return c;var e=a.length,f=arguments.length<3;d&&(b=Ab(b,d));if(e===+e){var g=bb&&D.call(a)==U?a.split(""):a;e&&f&&(c=g[--e]);while(e--)c=b(c,g[e],e,a);return c}var h,i=ic(a);e=i.length,e&&f&&(c=a[i[--e]]);while(e--)h=i[e],c=b(c,a[h],h,a);return c}function Bc(a){if(!a)return 0;var b=a.length;return b===+b?b:ic(a).length}function Ec(a){if(!a)return[];var b=a.length;return b===+b?(ab?D.call(a)==U:typeof a=="string")?a.split(""):C.call(a):nc(a)}function Gc(a){var b=[];if(!a)return b;var c=-1,d=a.length;while(++c<d)a[c]&&b.push(a[c]);return b}function Hc(a){var b=[];if(!a)return b;var c=-1,d=a.length,e=y.apply(b,arguments),f=Bb(e,d);while(++c<d)f(a[c])||b.push(a[c]);return b}function Ic(a,b,c){if(a)return b==null||c?a[0]:C.call(a,0,b)}function Jc(a,b){var c=[];if(!a)return c;var d,e=-1,f=a.length;while(++e<f)d=a[e],Kb(d)?A.apply(c,b?d:Jc(d)):c.push(d);return c}function Kc(a,b,c){if(!a)return-1;var d=-1,e=a.length;if(c){if(typeof c!="number")return d=Vc(a,b),a[d]===b?d:-1;d=(c<0?J(0,e+c):c)-1}while(++d<e)if(a[d]===b)return d;return-1}function Lc(a,b,c){return a?C.call(a,0,-(b==null||c?1:b)):[]}function Mc(a){var b=[];if(!a)return b;var c,d=arguments.length,e=[],f=-1,g=a.length;a:while(++f<g){c=a[f];if(Kc(b,c)<0){for(var h=1;h<d;h++)if(!(e[h]||(e[h]=Bb(arguments[h])))(c))continue a;b.push(c)}}return b}function Nc(a,b,c){if(a){var d=a.length;return b==null||c?a[d-1]:C.call(a,-b||d)}}function Oc(a,b,c){if(!a)return-1;var d=a.length;c&&typeof c=="number"&&(d=(c<0?J(0,d+c):K(c,d-1))+1);while(d--)if(a[d]===b)return d;return-1}function Pc(a,b,c){var d=-Infinity,e=d;if(!a)return e;var f,g=-1,h=a.length;if(!b){while(++g<h)a[g]>e&&(e=a[g]);return e}c&&(b=Ab(b,c));while(++g<h)f=b(a[g],g,a),f>d&&(d=f,e=a[g]);return e}function Qc(a,b,c){var d=Infinity,e=d;if(!a)return e;var f,g=-1,h=a.length;if(!b){while(++g<h)a[g]<e&&(e=a[g]);return e}c&&(b=Ab(b,c));while(++g<h)f=b(a[g],g,a),f<d&&(d=f,e=a[g]);return e}function Rc(a,b){if(!a)return{};var c=-1,d=a.length,e={};while(++c<d)b?e[a[c]]=b[c]:e[a[c][0]]=a[c][1];return e}function Sc(a,b,c){a=+a||0,c=+c||1,b==null&&(b=a,a=0);var d=-1,e=J(0,Math.ceil((b-a)/c)),f=Array(e);while(++d<e)f[d]=a,a+=c;return f}function Tc(a,b,c){return a?C.call(a,b==null||c?1:b):[]}function Uc(a){if(!a)return[];var b,c=-1,d=a.length,e=Array(d);while(++c<d)b=F(L()*(c+1)),e[c]=e[b],e[b]=a[c];return e}function Vc(a,b,c,d){if(!a)return 0;var e,f=0,g=a.length;if(c){d&&(c=_c(c,d)),b=c(b);while(f<g)e=f+g>>>1,c(a[e])<b?f=e+1:g=e}else while(f<g)e=f+g>>>1,a[e]<b?f=e+1:g=e;return f}function Wc(){var a=-1,b=[],c=y.apply(b,arguments),d=c.length;while(++a<d)Kc(b,c[a])<0&&b.push(c[a]);return b}function Xc(a,b,c,d){var e=[];if(!a)return e;var f,g=-1,h=a.length,i=[];typeof b=="function"&&(d=c,c=b,b=!1),c?d&&(c=Ab(c,d)):c=md;while(++g<h){f=c(a[g],g,a);if(b?!g||i[i.length-1]!==f:Kc(i,f)<0)i.push(f),e.push(a[g])}return e}function Yc(a){var b=[];if(!a)return b;var c=-1,d=a.length,e=Bb(arguments,1,20);while(++c<d)e(a[c])||b.push(a[c]);return b}function Zc(a){if(!a)return[];var b=-1,c=Pc(xc(arguments,"length")),d=Array(c);while(++b<c)d[b]=xc(arguments,b);return d}function $c(a,b){return a<1?b():function(){if(--a<1)return b.apply(this,arguments)}}function _c(a,b){return eb||E&&arguments.length>2?E.call.apply(E,arguments):Db(a,b,C.call(arguments,2))}function bd(){var a=arguments;return function(){var b=arguments,c=a.length;while(c--)b=[a[c].apply(this,b)];return b[0]}}function cd(a,b,c){function h(){g=null,c||(e=a.apply(f,d))}var d,e,f,g;return function(){var i=c&&!g;return d=arguments,f=this,V(g),g=W(h,b),i&&(e=a.apply(f,d)),e}}function dd(a,c){var d=C.call(arguments,2);return W(function(){return a.apply(b,d)},c)}function ed(a){var c=C.call(arguments,1);return W(function(){return a.apply(b,c)},1)}function fd(a,b){return Db(b,a,C.call(arguments,2))}function gd(a,b){var c={};return function(){var d=b?b.apply(this,arguments):arguments[0];return z.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}}function hd(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}function id(a){return Db(a,C.call(arguments,1))}function jd(a,b){function h(){g=new Date,f=null,d=a.apply(e,c)}var c,d,e,f,g=0;return function(){var i=new Date,j=b-(i-g);return c=arguments,e=this,j<=0?(g=i,d=a.apply(e,c)):f||(f=W(h,j)),d}}function kd(a,b){return function(){var c=[a];return arguments.length&&A.apply(c,arguments),b.apply(this,c)}}function ld(a){return a==null?"":(a+"").replace(u,Gb)}function md(a){return a}function nd(a){tc(Ub(a),function(b){var c=ob[b]=a[b];pb.prototype[b]=function(){var a=[this.__wrapped__];arguments.length&&A.apply(a,arguments);var b=c.apply(ob,a);return this.__chain__&&(b=new pb(b),b.__chain__=!0),b}})}function od(){return a._=k,this}function pd(a,b){return a==null&&b==null&&(b=1),a=+a||0,b==null&&(b=a,a=0),a+F(L()*((+b||0)-a+1))}function qd(a,b){if(!a)return null;var c=a[b];return Lb(c)?a[b]():c}function rd(a,b,c){c||(c={}),a+="";var d,e,f=0,g=ob.templateSettings,h="__p += '",i=c.variable||g.variable,j=i,k=RegExp((c.escape||g.escape||t).source+"|"+(c.interpolate||g.interpolate||t).source+"|"+(c.evaluate||g.evaluate||t).source+"|$","g");a.replace(k,function(b,c,e,g,i){h+=a.slice(f,i).replace(v,Fb),h+=c?"' +\n__e("+c+") +\n'":g?"';\n"+g+";\n__p += '":e?"' +\n((__t = ("+e+")) == null ? '' : __t) +\n'":"",d||(d=g||l.test(c||e)),f=i+b.length}),h+="';\n";if(!j){i="obj";if(d)h="with ("+i+") {\n"+h+"\n}\n";else{var m=RegExp("(\\(\\s*)"+i+"\\."+i+"\\b","g");h=h.replace(r,"$&"+i+".").replace(m,"$1__d")}}h=(d?h.replace(n,""):h).replace(o,"$1").replace(p,"$1;"),h="function("+i+") {\n"+(j?"":i+" || ("+i+" = {});\n")+"var __t, __p = '', __e = _.escape"+(d?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(j?"":", __d = "+i+"."+i+" || "+i)+";\n")+h+"return __p\n}";var q=hb?"\n//@ sourceURL=/lodash/template/source["+x++ +"]":"";try{e=Function("_","return "+h+q)(ob)}catch(s){throw s.source=h,s}return b?e(b):(e.source=h,e)}function sd(a,b,c){var d=-1,e=Array(a||0);if(c)while(++d<a)e[d]=b.call(c,d);else while(++d<a)e[d]=b(d);return e}function td(a){return a==null?"":(a+"").replace(m,Ib)}function ud(a){var b=i++;return a?a+b:b}function vd(a){return a=new pb(a),a.__chain__=!0,a}function wd(a,b){return b(a),a}function xd(){return this.__chain__=!0,this}function yd(){return this.__wrapped__}var c=typeof exports=="object"&&exports&&(typeof global=="object"&&global&&global==global.global&&(a=global),exports),d=Array.prototype,e=Boolean.prototype,f=Object.prototype,g=Number.prototype,h=String.prototype,i=0,j=30,k=a._,l=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,m=/&(?:amp|lt|gt|quot|#x27);/g,n=/\b__p \+= '';/g,o=/\b(__p \+=) '' \+/g,p=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/\w*$/,r=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,s=RegExp("^"+(f.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),t=/($^)/,u=/[&<>"']/g,v=/['\n\r\t\u2028\u2029\\]/g,w=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],x=0,y=d.concat,z=f.hasOwnProperty,A=d.push,B=f.propertyIsEnumerable,C=d.slice,D=f.toString,E=s.test(E=C.bind)&&E,F=Math.floor,G=s.test(G=Array.isArray)&&G,H=a.isFinite,I=s.test(I=Object.keys)&&I,J=Math.max,K=Math.min,L=Math.random,M="[object Arguments]",N="[object Array]",O="[object Boolean]",P="[object Date]",Q="[object Function]",R="[object Number]",S="[object Object]",T="[object RegExp]",U="[object String]",V=a.clearTimeout,W=a.setTimeout,X,Y,Z,$=!0;(function(){function c(){this.x=1}var a={0:1,length:1},b=[];c.prototype={valueOf:1,y:1};for(var d in new c)b.push(d);for(d in arguments)$=!d;X=(b+"").length<4,Z=b[0]!="x",Y=(b.splice.call(a,0,1),a[0])})(1);var _=!Jb(arguments),ab=C.call("x")[0]!="x",bb="x"[0]+Object("x")[0]!="xx";try{var cb=({toString:0}+"",D.call(a.document||0)==S)}catch(db){}var eb=E&&/\n|Opera/.test(E+D.call(a.opera)),fb=I&&/^.+$|true/.test(I+!!a.attachEvent),gb=!eb;try{var hb=(Function("//@")(),!a.attachEvent)}catch(db){}var ib={};ib[O]=ib[P]=ib[Q]=ib[R]=ib[S]=ib[T]=!1,ib[M]=ib[N]=ib[U]=!0;var jb={};jb[M]=jb[Q]=!1,jb[N]=jb[O]=jb[P]=jb[R]=jb[S]=jb[T]=jb[U]=!0;var kb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},lb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},mb={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1,unknown:!0},nb={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};ob.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var qb=rd("<% if (useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result<% if (init) { %> = <%= init %><% } %>;\n<%= exit %>;\n<%= top %>;\n<% if (arrayBranch) { %>var length = iteratee.length; index = -1;  <% if (objectBranch) { %>\nif (length === +length) {<% } %>  <% if (noCharByIndex) { %>\n  if (toString.call(iteratee) == stringClass) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  <%= arrayBranch.beforeLoop %>;\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayBranch.inLoop %>\n  }  <% if (objectBranch) { %>\n}<% } %><% } %><% if (objectBranch) { %>  <% if (arrayBranch) { %>\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectBranch.inLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  <%= objectBranch.beforeLoop %>;\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  <%= objectBranch.beforeLoop %>;\n  for (index in iteratee) {<%    if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>;    <% if (!hasDontEnumBug || useHas) { %>\n    }<% } %>\n  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n  }    <% } %>  <% } %>  <% if (arrayBranch || noArgsEnum) { %>\n}<% } %><% } %>\n<%= bottom %>;\nreturn result"),rb={args:"collection, callback, thisArg",init:"collection",top:"if (!callback) {\n  callback = identity\n}\nelse if (thisArg) {\n  callback = bindIterator(callback, thisArg)\n}",inLoop:"if (callback(value, index, collection) === false) return result"},sb={init:"{}",top:"var prop;\nif (typeof callback != 'function') {\n  var valueProp = callback;\n  callback = function(value) { return value[valueProp] }\n}\nelse if (thisArg) {\n  callback = bindIterator(callback, thisArg)\n}",inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop]++ : result[prop] = 1)"},tb={init:"true",inLoop:"if (!callback(value, index, collection)) return !result"},ub={useHas:!1,useStrict:!1,args:"object",init:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"result[index] = value",bottom:"  }\n}"},vb={init:"[]",inLoop:"callback(value, index, collection) && result.push(value)"},wb={top:"if (thisArg) callback = bindIterator(callback, thisArg)"},xb={inLoop:{object:rb.inLoop}},yb={init:"",exit:"if (!collection) return []",beforeLoop:{array:"result = Array(length)",object:"result = "+(fb?"Array(length)":"[]")},inLoop:{array:"result[index] = callback(value, index, collection)",object:"result"+(fb?"[ownIndex] = ":".push")+"(callback(value, index, collection))"}},zb={useHas:!1,args:"object, callback, thisArg",init:"{}",top:"var isFunc = typeof callback == 'function';\nif (!isFunc) {\n  var props = concat.apply(ArrayProto, arguments)\n} else if (thisArg) {\n  callback = bindIterator(callback, thisArg)\n}",inLoop:"if (isFunc\n  ? !callback(value, index, object)\n  : indexOf(props, index) < 0\n) result[index] = value"};_&&(Jb=function(a){return!!a&&!!z.call(a,"callee")});var Kb=G||function(a){return D.call(a)==N};Lb(/x/)&&(Lb=function(a){return D.call(a)==Q});var Nb=mb.__proto__!=f?Mb:function(a,b){if(!a)return!1;var c=a.valueOf,d=typeof c=="function"&&(d=c.__proto__)&&d.__proto__;return d?a==d||a.__proto__==d&&(b||!Jb(a)):Mb(a)},Ob=Eb({args:"object",init:"[]",inLoop:"result.push(index)"}),Qb=Eb(ub,{inLoop:"if (result[index] == null) "+ub.inLoop}),Rb=Eb(ub),Sb=Eb(rb,wb,xb,{useHas:!1}),Tb=Eb(rb,wb,xb),Ub=Eb({useHas:!1,args:"object",init:"[]",inLoop:"if (isFunction(value)) result.push(index)",bottom:"result.sort()"}),Wb=Eb({args:"object",init:"{}",inLoop:"result[value] = index"}),$b=Eb({args:"value",init:"true",top:"var className = toString.call(value),\n    length = value.length;\nif (arrayLikeClasses[className]"+(_?" || isArguments(value)":"")+" ||\n"+"  (className == objectClass && length === +length &&\n"+"  isFunction(value.splice))"+") return !length",inLoop:{object:"return false"}}),ic=I?function(a){var b=typeof a;return b=="function"&&B.call(a,"prototype")?Ob(a):a&&mb[b]?I(a):[]}:Ob,jc=Eb(ub,{args:"object, source, indicator",top:"var argsLength, isArr, stackA, stackB,\n    args = arguments, argsIndex = 0;\nif (indicator == isPlainObject) {\n  argsLength = 2;\n  stackA = args[3];\n  stackB = args[4]\n} else {\n  argsLength = args.length;\n  stackA = [];\n  stackB = []\n}\nwhile (++argsIndex < argsLength) {\n  if (iteratee = args[argsIndex]) {",inLoop:"if ((source = value) && ((isArr = isArray(source)) || isPlainObject(source))) {\n  var found = false, stackLength = stackA.length;\n  while (stackLength--) {\n    if (found = stackA[stackLength] == source) break\n  }\n  if (found) {\n    result[index] = stackB[stackLength]\n  } else {\n    stackA.push(source);\n    stackB.push(value = (value = result[index]) && isArr\n      ? (isArray(value) ? value : [])\n      : (isPlainObject(value) ? value : {})\n    );\n    result[index] = callee(value, source, isPlainObject, stackA, stackB)\n  }\n} else if (source != null) {\n  result[index] = source\n}"}),kc=Eb(zb),lc=Eb({args:"object",init:"[]",inLoop:"result"+(fb?"[ownIndex] = ":".push")+"([index, value])"}),mc=Eb(zb,{top:"if (typeof callback != 'function') {\n  var prop,\n      props = concat.apply(ArrayProto, arguments),\n      length = props.length;\n  for (index = 1; index < length; index++) {\n    prop = props[index];\n    if (prop in object) result[prop] = object[prop]\n  }\n} else {\n  if (thisArg) callback = bindIterator(callback, thisArg)",inLoop:"if (callback(value, index, object)) result[index] = value",bottom:"}"}),nc=Eb({args:"object",init:"[]",inLoop:"result.push(value)"}),oc=Eb({args:"collection, target",init:"false",noCharByIndex:!1,beforeLoop:{array:"if (toString.call(collection) == stringClass) return collection.indexOf(target) > -1"},inLoop:"if (value === target) return true"}),pc=Eb(rb,sb),qc=Eb(rb,tb),rc=Eb(rb,vb),sc=Eb(rb,wb,{init:"",inLoop:"if (callback(value, index, collection)) return value"}),tc=Eb(rb,wb),uc=Eb(rb,sb,{inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop] : result[prop] = []).push(value)"}),vc=Eb(yb,{args:"collection, methodName",top:"var args = slice.call(arguments, 2),\n    isFunc = typeof methodName == 'function'",inLoop:{array:"result[index] = (isFunc ? methodName : value[methodName]).apply(value, args)",object:"result"+(fb?"[ownIndex] = ":".push")+"((isFunc ? methodName : value[methodName]).apply(value, args))"}}),wc=Eb(rb,yb),xc=Eb(yb,{args:"collection, property",inLoop:{array:"result[index] = value[property]",object:"result"+(fb?"[ownIndex] = ":".push")+"(value[property])"}}),yc=Eb({args:"collection, callback, accumulator, thisArg",init:"accumulator",top:"var noaccum = arguments.length < 3;\nif (thisArg) callback = bindIterator(callback, thisArg)",beforeLoop:{array:"if (noaccum) result = iteratee[++index]"},inLoop:{array:"result = callback(result, value, index, collection)",object:"result = noaccum\n  ? (noaccum = false, value)\n  : callback(result, value, index, collection)"}}),Ac=Eb(rb,vb,{inLoop:"!"+vb.inLoop}),Cc=Eb(rb,tb,{init:"false",inLoop:tb.inLoop.replace("!","")}),Dc=Eb(rb,sb,yb,{inLoop:{array:"result[index] = {\n  criteria: callback(value, index, collection),\n  index: index,\n  value: value\n}",object:"result"+(fb?"[ownIndex] = ":".push")+"({\n"+"  criteria: callback(value, index, collection),\n"+"  index: index,\n"+"  value: value\n"+"})"},bottom:"result.sort(compareAscending);\nlength = result.length;\nwhile (length--) {\n  result[length] = result[length].value\n}"}),Fc=Eb(vb,{args:"collection, properties",top:"var props = [];\nforIn(properties, function(value, prop) { props.push(prop) });\nvar propsLength = props.length",inLoop:"for (var prop, pass = true, propIndex = 0; propIndex < propsLength; propIndex++) {\n  prop = props[propIndex];\n  if (!(pass = value[prop] === properties[prop])) break\n}\npass && result.push(value)"}),ad=Eb({useHas:!1,useStrict:!1,args:"object",init:"object",top:"var funcs = arguments,\n    length = funcs.length;\nif (length > 1) {\n  for (var index = 1; index < length; index++) {\n    result[funcs[index]] = bind(result[funcs[index]], result)\n  }\n  return result\n}",inLoop:"if (isFunction(result[index])) {\n  result[index] = bind(result[index], result)\n}"});ob.VERSION="0.7.0",ob.after=$c,ob.bind=_c,ob.bindAll=ad,ob.chain=vd,ob.clone=Pb,ob.compact=Gc,ob.compose=bd,ob.contains=oc,ob.countBy=pc,ob.debounce=cd,ob.defaults=Qb,ob.defer=ed,ob.delay=dd,ob.difference=Hc,ob.escape=ld,ob.every=qc,ob.extend=Rb,ob.filter=rc,ob.find=sc,ob.first=Ic,ob.flatten=Jc,ob.forEach=tc,ob.forIn=Sb,ob.forOwn=Tb,ob.functions=Ub,ob.groupBy=uc,ob.has=Vb,ob.identity=md,ob.indexOf=Kc,ob.initial=Lc,ob.intersection=Mc,ob.invert=Wb,ob.invoke=vc,ob.isArguments=Jb,ob.isArray=Kb,ob.isBoolean=Xb,ob.isDate=Yb,ob.isElement=Zb,ob.isEmpty=$b,ob.isEqual=_b,ob.isFinite=ac,ob.isFunction=Lb,ob.isNaN=cc,ob.isNull=dc,ob.isNumber=ec,ob.isObject=bc,ob.isRegExp=fc,ob.isString=gc,ob.isUndefined=hc,ob.keys=ic,ob.last=Nc,ob.lastIndexOf=Oc,ob.lateBind=fd,ob.map=wc,ob.max=Pc,ob.memoize=gd,ob.merge=jc,ob.min=Qc,ob.mixin=nd,ob.noConflict=od,ob.object=Rc,ob.omit=kc,ob.once=hd,ob.pairs=lc,ob.partial=id,ob.pick=mc,ob.pluck=xc,ob.random=pd,ob.range=Sc,ob.reduce=yc,ob.reduceRight=zc,ob.reject=Ac,ob.rest=Tc,ob.result=qd,ob.shuffle=Uc,ob.size=Bc,ob.some=Cc,ob.sortBy=Dc,ob.sortedIndex=Vc,ob.tap=wd,ob.template=rd,ob.throttle=jd,ob.times=sd,ob.toArray=Ec,ob.unescape=td,ob.union=Wc,ob.uniq=Xc,ob.uniqueId=ud,ob.values=nc,ob.where=Fc,ob.without=Yc,ob.wrap=kd,ob.zip=Zc,ob.all=qc,ob.any=Cc,ob.collect=wc,ob.detect=sc,ob.drop=Tc,ob.each=tc,ob.foldl=yc,ob.foldr=zc,ob.head=Ic,ob.include=oc,ob.inject=yc,ob.methods=Ub,ob.select=rc,ob.tail=Tc,ob.take=Ic,ob.unique=Xc,ob._iteratorTemplate=qb,ob._shimKeys=Ob,pb.prototype=ob.prototype,nd(ob),pb.prototype.chain=xd,pb.prototype.value=yd,tc(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];pb.prototype[a]=function(){var a=this.__wrapped__;return b.apply(a,arguments),Y&&a.length===0&&delete a[0],this.__chain__&&(a=new pb(a),a.__chain__=!0),a}}),tc(["concat","join","slice"],function(a){var b=d[a];pb.prototype[a]=function(){var a=this.__wrapped__,c=b.apply(a,arguments);return this.__chain__&&(c=new pb(c),c.__chain__=!0),c}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(a._=ob,define("lodash",[],function(){return ob})):c?typeof module=="object"&&module&&module.exports==c?(module.exports=ob)._=ob:c._=ob:a._=ob})(this),function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===a&&(Array.prototype.reduce=function(b){if(this===void 0||this===null)throw new TypeError;var c=Object(this),d=c.length>>>0,e=0,f;if(typeof b!="function")throw new TypeError;if(d==0&&arguments.length==1)throw new TypeError;if(arguments.length>=2)f=arguments[1];else do{if(e in c){f=c[e++];break}if(++e>=d)throw new TypeError}while(!0);while(e<d)e in c&&(f=b.call(a,f,c[e],e,c)),e++;return f})}();var Zepto=function(){function A(a){return v.call(a)=="[object Function]"}function B(a){return a instanceof Object}function C(b){var c,d;if(v.call(b)!=="[object Object]")return!1;d=A(b.constructor)&&b.constructor.prototype;if(!d||!hasOwnProperty.call(d,"isPrototypeOf"))return!1;for(c in b);return c===a||hasOwnProperty.call(b,c)}function D(a){return a instanceof Array}function E(a){return typeof a.length=="number"}function F(b){return b.filter(function(b){return b!==a&&b!==null})}function G(a){return a.length>0?[].concat.apply([],a):a}function H(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function I(a){return a in i?i[a]:i[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function J(a,b){return typeof b=="number"&&!k[H(a)]?b+"px":b}function K(a){var b,c;return h[a]||(b=g.createElement(a),g.body.appendChild(b),c=j(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),c=="none"&&(c="block"),h[a]=c),h[a]}function L(b,d){return d===a?c(b):c(b).filter(d)}function M(a,b,c,d){return A(b)?b.call(a,c,d):b}function N(a,b,d){var e=a%2?b:b.parentNode;e?e.insertBefore(d,a?a==1?e.firstChild:a==2?b:null:b.nextSibling):c(d).remove()}function O(a,b){b(a);for(var c in a.childNodes)O(a.childNodes[c],b)}var a,b,c,d,e=[],f=e.slice,g=window.document,h={},i={},j=g.defaultView.getComputedStyle,k={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},l=/^\s*<(\w+|!)[^>]*>/,m=[1,3,8,9,11],n=["after","prepend","before","append"],o=g.createElement("table"),p=g.createElement("tr"),q={tr:g.createElement("tbody"),tbody:o,thead:o,tfoot:o,td:p,th:p,"*":g.createElement("div")},r=/complete|loaded|interactive/,s=/^\.([\w-]+)$/,t=/^#([\w-]+)$/,u=/^[\w-]+$/,v={}.toString,w={},x,y,z=g.createElement("div");return w.matches=function(a,b){if(!a||a.nodeType!==1)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=z).appendChild(a),d=~w.qsa(e,b).indexOf(a),f&&z.removeChild(a),d},x=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},y=function(a){return a.filter(function(b,c){return a.indexOf(b)==c})},w.fragment=function(b,d){d===a&&(d=l.test(b)&&RegExp.$1),d in q||(d="*");var e=q[d];return e.innerHTML=""+b,c.each(f.call(e.childNodes),function(){e.removeChild(this)})},w.Z=function(a,b){return a=a||[],a.__proto__=arguments.callee.prototype,a.selector=b||"",a},w.isZ=function(a){return a instanceof w.Z},w.init=function(b,d){if(!b)return w.Z();if(A(b))return c(g).ready(b);if(w.isZ(b))return b;var e;if(D(b))e=F(b);else if(C(b))e=[c.extend({},b)],b=null;else if(m.indexOf(b.nodeType)>=0||b===window)e=[b],b=null;else if(l.test(b))e=w.fragment(b.trim(),RegExp.$1),b=null;else{if(d!==a)return c(d).find(b);e=w.qsa(g,b)}return w.Z(e,b)},c=function(a,b){return w.init(a,b)},c.extend=function(c){return f.call(arguments,1).forEach(function(d){for(b in d)d[b]!==a&&(c[b]=d[b])}),c},w.qsa=function(a,b){var c;return a===g&&t.test(b)?(c=a.getElementById(RegExp.$1))?[c]:e:a.nodeType!==1&&a.nodeType!==9?e:f.call(s.test(b)?a.getElementsByClassName(RegExp.$1):u.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))},c.isFunction=A,c.isObject=B,c.isArray=D,c.isPlainObject=C,c.inArray=function(a,b,c){return e.indexOf.call(b,a,c)},c.trim=function(a){return a.trim()},c.uuid=0,c.map=function(a,b){var c,d=[],e,f;if(E(a))for(e=0;e<a.length;e++)c=b(a[e],e),c!=null&&d.push(c);else for(f in a)c=b(a[f],f),c!=null&&d.push(c);return G(d)},c.each=function(a,b){var c,d;if(E(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},c.fn={forEach:e.forEach,reduce:e.reduce,push:e.push,indexOf:e.indexOf,concat:e.concat,map:function(a){return c.map(this,function(b,c){return a.call(b,c,b)})},slice:function(){return c(f.apply(this,arguments))},ready:function(a){return r.test(g.readyState)?a(c):g.addEventListener("DOMContentLoaded",function(){a(c)},!1),this},get:function(b){return b===a?f.call(this):this[b]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(a){return this.forEach(function(b,c){a.call(b,c,b)}),this},filter:function(a){return c([].filter.call(this,function(b){return w.matches(b,a)}))},add:function(a,b){return c(y(this.concat(c(a,b))))},is:function(a){return this.length>0&&w.matches(this[0],a)},not:function(b){var d=[];if(A(b)&&b.call!==a)this.each(function(a){b.call(this,a)||d.push(this)});else{var e=typeof b=="string"?this.filter(b):E(b)&&A(b.item)?f.call(b):c(b);this.forEach(function(a){e.indexOf(a)<0&&d.push(a)})}return c(d)},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!B(a)?a:c(a)},last:function(){var a=this[this.length-1];return a&&!B(a)?a:c(a)},find:function(a){var b;return this.length==1?b=w.qsa(this[0],a):b=this.map(function(){return w.qsa(this,a)}),c(b)},closest:function(a,b){var d=this[0];while(d&&!w.matches(d,a))d=d!==b&&d!==g&&d.parentNode;return c(d)},parents:function(a){var b=[],d=this;while(d.length>0)d=c.map(d,function(a){if((a=a.parentNode)&&a!==g&&b.indexOf(a)<0)return b.push(a),a});return L(b,a)},parent:function(a){return L(y(this.pluck("parentNode")),a)},children:function(a){return L(this.map(function(){return f.call(this.children)}),a)},siblings:function(a){return L(this.map(function(a,b){return f.call(b.parentNode.children).filter(function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return this.map(function(){return this[a]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null),j(this,"").getPropertyValue("display")=="none"&&(this.style.display=K(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return this.each(function(){c(this).wrapAll(c(a)[0].cloneNode(!1))})},wrapAll:function(a){return this[0]&&(c(this[0]).before(a=c(a)),a.append(this)),this},unwrap:function(){return this.parent().each(function(){c(this).replaceWith(c(this).children())}),this},clone:function(){return c(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(b){return(b===a?this.css("display")=="none":b)?this.show():this.hide()},prev:function(){return c(this.pluck("previousElementSibling"))},next:function(){return c(this.pluck("nextElementSibling"))},html:function(b){return b===a?this.length>0?this[0].innerHTML:null:this.each(function(a){var d=this.innerHTML;c(this).empty().append(M(this,b,a,d))})},text:function(b){return b===a?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=b})},attr:function(c,d){var e;return typeof c=="string"&&d===a?this.length==0||this[0].nodeType!==1?a:c=="value"&&this[0].nodeName=="INPUT"?this.val():!(e=this[0].getAttribute(c))&&c in this[0]?this[0][c]:e:this.each(function(a){if(this.nodeType!==1)return;if(B(c))for(b in c)this.setAttribute(b,c[b]);else this.setAttribute(c,M(this,d,a,this.getAttribute(c)))})},removeAttr:function(a){return this.each(function(){this.nodeType===1&&this.removeAttribute(a)})},prop:function(b,c){return c===a?this[0]?this[0][b]:a:this.each(function(a){this[b]=M(this,c,a,this[b])})},data:function(b,c){var d=this.attr("data-"+H(b),c);return d!==null?d:a},val:function(b){return b===a?this.length>0?this[0].value:a:this.each(function(a){this.value=M(this,b,a,this.value)})},offset:function(){if(this.length==0)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},css:function(c,d){if(d===a&&typeof c=="string")return this.length==0?a:this[0].style[x(c)]||j(this[0],"").getPropertyValue(c);var e="";for(b in c)typeof c[b]=="string"&&c[b]==""?this.each(function(){this.style.removeProperty(H(b))}):e+=H(b)+":"+J(b,c[b])+";";return typeof c=="string"&&(d==""?this.each(function(){this.style.removeProperty(H(c))}):e=H(c)+":"+J(c,d)),this.each(function(){this.style.cssText+=";"+e})},index:function(a){return a?this.indexOf(c(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return this.length<1?!1:I(a).test(this[0].className)},addClass:function(a){return this.each(function(b){d=[];var e=this.className,f=M(this,a,b,e);f.split(/\s+/g).forEach(function(a){c(this).hasClass(a)||d.push(a)},this),d.length&&(this.className+=(e?" ":"")+d.join(" "))})},removeClass:function(b){return this.each(function(c){if(b===a)return this.className="";d=this.className,M(this,b,c,d).split(/\s+/g).forEach(function(a){d=d.replace(I(a)," ")}),this.className=d.trim()})},toggleClass:function(b,d){return this.each(function(e){var f=M(this,b,e,this.className);(d===a?!c(this).hasClass(f):d)?c(this).addClass(f):c(this).removeClass(f)})}},["width","height"].forEach(function(b){c.fn[b]=function(d){var e,f=b.replace(/./,function(a){return a[0].toUpperCase()});return d===a?this[0]==window?window["inner"+f]:this[0]==g?g.documentElement["offset"+f]:(e=this.offset())&&e[b]:this.each(function(a){var e=c(this);e.css(b,M(this,d,a,e[b]()))})}}),n.forEach(function(a,b){c.fn[a]=function(){var a=c.map(arguments,function(a){return B(a)?a:w.fragment(a)});if(a.length<1)return this;var d=this.length,e=d>1,f=b<2;return this.each(function(c,g){for(var h=0;h<a.length;h++){var i=a[f?a.length-h-1:h];O(i,function(a){a.nodeName!=null&&a.nodeName.toUpperCase()==="SCRIPT"&&(!a.type||a.type==="text/javascript")&&window.eval.call(window,a.innerHTML)}),e&&c<d-1&&(i=i.cloneNode(!0)),N(b,g,i)}})},c.fn[b%2?a+"To":"insert"+(b?"Before":"After")]=function(b){return c(b)[a](this),this}}),w.Z.prototype=c.fn,w.camelize=x,w.uniq=y,c.zepto=w,c}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(a){function f(a){return a._zid||(a._zid=d++)}function g(a,b,d,e){b=h(b);if(b.ns)var g=i(b.ns);return(c[f(a)]||[]).filter(function(a){return a&&(!b.e||a.e==b.e)&&(!b.ns||g.test(a.ns))&&(!d||f(a.fn)===f(d))&&(!e||a.sel==e)})}function h(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function i(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function j(b,c,d){a.isObject(b)?a.each(b,d):b.split(/\s/).forEach(function(a){d(a,c)})}function k(b,d,e,g,i,k){k=!!k;var l=f(b),m=c[l]||(c[l]=[]);j(d,e,function(c,d){var e=i&&i(d,c),f=e||d,j=function(a){var c=f.apply(b,[a].concat(a.data));return c===!1&&a.preventDefault(),c},l=a.extend(h(c),{fn:d,proxy:j,sel:g,del:e,i:m.length});m.push(l),b.addEventListener(l.e,j,k)})}function l(a,b,d,e){var h=f(a);j(b||"",d,function(b,d){g(a,b,d,e).forEach(function(b){delete c[h][b.i],a.removeEventListener(b.e,b.proxy,!1)})})}function p(b){var c=a.extend({originalEvent:b},b);return a.each(o,function(a,d){c[a]=function(){return this[d]=m,b[a].apply(b,arguments)},c[d]=n}),c}function q(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}}}var b=a.zepto.qsa,c={},d=1,e={};e.click=e.mousedown=e.mouseup=e.mousemove="MouseEvents",a.event={add:k,remove:l},a.proxy=function(b,c){if(a.isFunction(b)){var d=function(){return b.apply(c,arguments)};return d._zid=f(b),d}if(typeof c=="string")return a.proxy(b[c],b);throw new TypeError("expected function")},a.fn.bind=function(a,b){return this.each(function(){k(this,a,b)})},a.fn.unbind=function(a,b){return this.each(function(){l(this,a,b)})},a.fn.one=function(a,b){return this.each(function(c,d){k(this,a,b,null,function(a,b){return function(){var c=a.apply(d,arguments);return l(d,b,a),c}})})};var m=function(){return!0},n=function(){return!1},o={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(b,c,d){var e=!1;if(c=="blur"||c=="focus")a.iswebkit?c=c=="blur"?"focusout":c=="focus"?"focusin":c:e=!0;return this.each(function(f,g){k(g,c,d,b,function(c){return function(d){var e,f=a(d.target).closest(b,g).get(0);if(f)return e=a.extend(p(d),{currentTarget:f,liveFired:g}),c.apply(f,[e].concat([].slice.call(arguments,1)))}},e)})},a.fn.undelegate=function(a,b,c){return this.each(function(){l(this,b,c,a)})},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d){return c==undefined||a.isFunction(c)?this.bind(b,c):this.delegate(c,b,d)},a.fn.off=function(b,c,d){return c==undefined||a.isFunction(c)?this.unbind(b,c):this.undelegate(c,b,d)},a.fn.trigger=function(b,c){return typeof b=="string"&&(b=a.Event(b)),q(b),b.data=c,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(b)})},a.fn.triggerHandler=function(b,c){var d,e;return this.each(function(f,h){d=p(typeof b=="string"?a.Event(b):b),d.data=c,d.target=h,a.each(g(h,b.type||b),function(a,b){e=b.proxy(d);if(d.isImmediatePropagationStopped())return!1})}),e},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){if(a)this.bind(b,a);else if(this.length)try{this.get(0)[b]()}catch(c){}return this}}),a.Event=function(a,b){var c=document.createEvent(e[a]||"Events"),d=!0;if(b)for(var f in b)f=="bubbles"?d=!!b[f]:c[f]=b[f];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c}}(Zepto),function(a){function b(a){var b=this.os={},c=this.browser={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/Kindle\/([\d.]+)/),k=a.match(/Silk\/([\d._]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/);if(c.webkit=!!d)c.version=d[1];e&&(b.android=!0,b.version=e[2]),g&&(b.ios=b.iphone=!0,b.version=g[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),h&&(b.webos=!0,b.version=h[2]),i&&(b.touchpad=!0),l&&(b.blackberry=!0,b.version=l[2]),j&&(b.kindle=!0,b.version=j[1]),k&&(c.silk=!0,c.version=k[1]),!k&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0)}b.call(a,navigator.userAgent),a.__detect=b}(Zepto),function(a,b){function l(a){return a.toLowerCase()}function m(a){return d?d+a:l(a)}var c="",d,e,f,g={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},h=window.document,i=h.createElement("div"),j=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,k={};a.each(g,function(a,e){if(i.style[a+"TransitionProperty"]!==b)return c="-"+l(a)+"-",d=e,!1}),k[c+"transition-property"]=k[c+"transition-duration"]=k[c+"transition-timing-function"]=k[c+"animation-name"]=k[c+"animation-duration"]="",a.fx={off:d===b&&i.style.transitionProperty===b,cssPrefix:c,transitionEnd:m("TransitionEnd"),animationEnd:m("AnimationEnd")},a.fn.animate=function(b,c,d,e){return a.isObject(c)&&(d=c.easing,e=c.complete,c=c.duration),c&&(c/=1e3),this.anim(b,c,d,e)},a.fn.anim=function(d,e,f,g){var h,i={},l,m=this,n,o=a.fx.transitionEnd;e===b&&(e=.4),a.fx.off&&(e=0);if(typeof d=="string")i[c+"animation-name"]=d,i[c+"animation-duration"]=e+"s",o=a.fx.animationEnd;else{for(l in d)j.test(l)?(h||(h=[]),h.push(l+"("+d[l]+")")):i[l]=d[l];h&&(i[c+"transform"]=h.join(" ")),!a.fx.off&&typeof d=="object"&&(i[c+"transition-property"]=Object.keys(d).join(", "),i[c+"transition-duration"]=e+"s",i[c+"transition-timing-function"]=f||"linear")}return n=function(b){if(typeof b!="undefined"){if(b.target!==b.currentTarget)return;a(b.target).unbind(o,arguments.callee)}a(this).css(k),g&&g.call(this)},e>0&&this.bind(o,n),setTimeout(function(){m.css(i),e<=0&&setTimeout(function(){m.each(function(){n.call(this)})},0)},0),this},i=null}(Zepto),function($){function triggerAndReturn(a,b,c){var d=$.Event(b);return $(a).trigger(d,c),!d.defaultPrevented}function triggerGlobal(a,b,c,d){if(a.global)return triggerAndReturn(b||document,c,d)}function ajaxStart(a){a.global&&$.active++===0&&triggerGlobal(a,null,"ajaxStart")}function ajaxStop(a){a.global&&!--$.active&&triggerGlobal(a,null,"ajaxStop")}function ajaxBeforeSend(a,b){var c=b.context;if(b.beforeSend.call(c,a,b)===!1||triggerGlobal(b,c,"ajaxBeforeSend",[a,b])===!1)return!1;triggerGlobal(b,c,"ajaxSend",[a,b])}function ajaxSuccess(a,b,c){var d=c.context,e="success";c.success.call(d,a,e,b),triggerGlobal(c,d,"ajaxSuccess",[b,c,a]),ajaxComplete(e,b,c)}function ajaxError(a,b,c,d){var e=d.context;d.error.call(e,c,b,a),triggerGlobal(d,e,"ajaxError",[c,d,a]),ajaxComplete(b,c,d)}function ajaxComplete(a,b,c){var d=c.context;c.complete.call(d,b,a),triggerGlobal(c,d,"ajaxComplete",[b,c]),ajaxStop(c)}function empty(){}function mimeToDataType(a){return a&&(a==htmlType?"html":a==jsonType?"json":scriptTypeRE.test(a)?"script":xmlTypeRE.test(a)&&"xml")||"text"}function appendQuery(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function serializeData(a){isObject(a.data)&&(a.data=$.param(a.data)),a.data&&(!a.type||a.type.toUpperCase()=="GET")&&(a.url=appendQuery(a.url,a.data))}function serialize(a,b,c,d){var e=$.isArray(b);$.each(b,function(b,f){d&&(b=c?d:d+"["+(e?"":b)+"]"),!d&&e?a.add(f.name,f.value):(c?$.isArray(f):isObject(f))?serialize(a,f,c,b):a.add(b,f)})}var jsonpID=0,isObject=$.isObject,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(a){var b="jsonp"+ ++jsonpID,c=document.createElement("script"),d=function(){$(c).remove(),b in window&&(window[b]=empty),ajaxComplete("abort",e,a)},e={abort:d},f;return a.error&&(c.onerror=function(){e.abort(),a.error()}),window[b]=function(d){clearTimeout(f),$(c).remove(),delete window[b],ajaxSuccess(d,e,a)},serializeData(a),c.src=a.url.replace(/=\?/,"="+b),$("head").append(c),a.timeout>0&&(f=setTimeout(function(){e.abort(),ajaxComplete("timeout",e,a)},a.timeout)),e},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0},$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host);var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,"callback=?")),$.ajaxJSONP(settings);settings.url||(settings.url=window.location.toString()),serializeData(settings);var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=$.ajaxSettings.xhr(),abortTimeout;settings.crossDomain||(baseHeaders["X-Requested-With"]="XMLHttpRequest"),mime&&(baseHeaders.Accept=mime,mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime));if(settings.contentType||settings.data&&settings.type.toUpperCase()!="GET")baseHeaders["Content-Type"]=settings.contentType||"application/x-www-form-urlencoded";settings.headers=$.extend(baseHeaders,settings.headers||{});if(settings.cache===!1){var ts=Date.now(),rquery=/\?/,rts=/([?&])_=[^&]*/,ret=settings.url.replace(rts,"$1_="+ts);settings.url=ret+(ret===settings.url?(rquery.test(settings.url)?"&":"?")+"_="+ts:"")}xhr.onreadystatechange=function(){if(xhr.readyState==4){clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:JSON.parse(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings):ajaxSuccess(result,xhr,settings)}else ajaxError(null,"error",xhr,settings)}};var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async);for(name in settings.headers)xhr.setRequestHeader(name,settings.headers[name]);return ajaxBeforeSend(xhr,settings)===!1?(xhr.abort(),!1):(settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr)},$.get=function(a,b){return $.ajax({url:a,success:b})},$.post=function(a,b,c,d){return $.isFunction(b)&&(d=d||c,c=b,b=null),$.ajax({type:"POST",url:a,data:b,success:c,dataType:d})},$.getJSON=function(a,b){return $.ajax({url:a,success:b,dataType:"json"})},$.fn.load=function(a,b){if(!this.length)return this;var c=this,d=a.split(/\s/),e;return d.length>1&&(a=d[0],e=d[1]),$.get(a,function(a){c.html(e?$(document.createElement("div")).html(a.replace(rscript,"")).find(e).html():a),b&&b.call(c)}),this};var escape=encodeURIComponent;$.param=function(a,b){var c=[];return c.add=function(a,b){this.push(escape(a)+"="+escape(b))},serialize(c,a,b),c.join("&").replace("%20","+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b=[],c;return a(Array.prototype.slice.call(this.get(0).elements)).each(function(){c=a(this);var d=c.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&d!="submit"&&d!="reset"&&d!="button"&&(d!="radio"&&d!="checkbox"||this.checked)&&b.push({name:c.attr("name"),value:c.val()})}),b},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(a){function d(a){return"tagName"in a?a:a.parentNode}function e(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function h(){g=null,b.last&&(b.el.trigger("longTap"),b={})}function i(){g&&clearTimeout(g),g=null}var b={},c,f=750,g;a(document).ready(function(){var j,k;a(document.body).bind("touchstart",function(e){j=Date.now(),k=j-(b.last||j),b.el=a(d(e.touches[0].target)),c&&clearTimeout(c),b.x1=e.touches[0].pageX,b.y1=e.touches[0].pageY,k>0&&k<=250&&(b.isDoubleTap=!0),b.last=j,g=setTimeout(h,f)}).bind("touchmove",function(a){i(),b.x2=a.touches[0].pageX,b.y2=a.touches[0].pageY}).bind("touchend",function(a){i(),b.isDoubleTap?(b.el.trigger("doubleTap"),b={}):b.x2&&Math.abs(b.x1-b.x2)>30||b.y2&&Math.abs(b.y1-b.y2)>30?(b.el.trigger("swipe")&&b.el.trigger("swipe"+e(b.x1,b.x2,b.y1,b.y2)),b={}):"last"in b&&(b.el.trigger("tap"),c=setTimeout(function(){c=null,b.el.trigger("singleTap"),b={}},250))}).bind("touchcancel",function(){c&&clearTimeout(c),g&&clearTimeout(g),g=c=null,b={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}(Zepto),define("zepto",function(a){return function(){return a.$}}(this)),function(a){function b(a,b,c,d){if("addEventListener"in a)try{a.addEventListener(b,c,d)}catch(e){if(typeof c!="object"||!c.handleEvent)throw e;a.addEventListener(b,function(a){c.handleEvent.call(c,a)},d)}else"attachEvent"in a&&(typeof c=="object"&&c.handleEvent?a.attachEvent("on"+b,function(){c.handleEvent.call(c)}):a.attachEvent("on"+b,c))}function c(a,b,c,d){if("removeEventListener"in a)try{a.removeEventListener(b,c,d)}catch(e){if(typeof c!="object"||!c.handleEvent)throw e;a.removeEventListener(b,function(a){c.handleEvent.call(c,a)},d)}else"detachEvent"in a&&(typeof c=="object"&&c.handleEvent?a.detachEvent("on"+b,function(){c.handleEvent.call(c)}):a.detachEvent("on"+b,c))}window.MBP=window.MBP||{},MBP.viewportmeta=a.querySelector&&a.querySelector('meta[name="viewport"]'),MBP.ua=navigator.userAgent,MBP.scaleFix=function(){MBP.viewportmeta&&/iPhone|iPad|iPod/.test(MBP.ua)&&!/Opera Mini/.test(MBP.ua)&&(MBP.viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",a.addEventListener("gesturestart",MBP.gestureStart,!1))},MBP.gestureStart=function(){MBP.viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"},MBP.BODY_SCROLL_TOP=!1,MBP.getScrollTop=function(){var b=window,c=a;return b.pageYOffset||c.compatMode==="CSS1Compat"&&c.documentElement.scrollTop||c.body.scrollTop||0},MBP.hideUrlBar=function(){var a=window;!location.hash&&MBP.BODY_SCROLL_TOP!==!1&&a.scrollTo(0,MBP.BODY_SCROLL_TOP===1?0:1)},MBP.hideUrlBarOnLoad=function(){var a=window,b=a.document,c;!location.hash&&a.addEventListener&&(window.scrollTo(0,1),MBP.BODY_SCROLL_TOP=1,c=setInterval(function(){b.body&&(clearInterval(c),MBP.BODY_SCROLL_TOP=MBP.getScrollTop(),MBP.hideUrlBar())},15),a.addEventListener("load",function(){setTimeout(function(){MBP.getScrollTop()<20&&MBP.hideUrlBar()},0)}))},MBP.fastButton=function(a,b,c){this.handler=b,this.pressedClass=typeof c=="undefined"?"pressed":c;if(a.length&&a.length>1)for(var d in a)this.addClickEvent(a[d]);else this.addClickEvent(a)},MBP.fastButton.prototype.handleEvent=function(a){a=a||window.event;switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onClick(a);break;case"click":this.onClick(a)}},MBP.fastButton.prototype.onTouchStart=function(b){var c=b.target||b.srcElement;b.stopPropagation(),c.addEventListener("touchend",this,!1),a.body.addEventListener("touchmove",this,!1),this.startX=b.touches[0].clientX,this.startY=b.touches[0].clientY,c.className+=" "+this.pressedClass},MBP.fastButton.prototype.onTouchMove=function(a){(Math.abs(a.touches[0].clientX-this.startX)>10||Math.abs(a.touches[0].clientY-this.startY)>10)&&this.reset(a)},MBP.fastButton.prototype.onClick=function(a){a=a||window.event;var b=a.target||a.srcElement;a.stopPropagation&&a.stopPropagation(),this.reset(a),this.handler.apply(a.currentTarget,[a]),a.type=="touchend"&&MBP.preventGhostClick(this.startX,this.startY);var c=new RegExp(" ?"+this.pressedClass,"gi");b.className=b.className.replace(c,"")},MBP.fastButton.prototype.reset=function(b){var d=b.target||b.srcElement;c(d,"touchend",this,!1),c(a.body,"touchmove",this,!1);var e=new RegExp(" ?"+this.pressedClass,"gi");d.className=d.className.replace(e,"")},MBP.fastButton.prototype.addClickEvent=function(a){b(a,"touchstart",this,!1),b(a,"click",this,!1)},MBP.preventGhostClick=function(a,b){MBP.coords.push(a,b),window.setTimeout(function(){MBP.coords.splice(0,2)},2500)},MBP.ghostClickHandler=function(a){if(!MBP.hadTouchEvent&&MBP.dodgyAndroid){a.stopPropagation(),a.preventDefault();return}for(var b=0,c=MBP.coords.length;b<c;b+=2){var d=MBP.coords[b],e=MBP.coords[b+1];Math.abs(a.clientX-d)<25&&Math.abs(a.clientY-e)<25&&(a.stopPropagation(),a.preventDefault())}},MBP.dodgyAndroid="ontouchstart"in window&&navigator.userAgent.indexOf("Android 2.3")!=-1,a.addEventListener&&a.addEventListener("click",MBP.ghostClickHandler,!0),b(a.documentElement,"touchstart",function(){MBP.hadTouchEvent=!0},!1),MBP.coords=[],MBP.autogrow=function(a,b){function c(a){var b=this.scrollHeight,c=this.clientHeight;b>c&&(this.style.height=b+3*e+"px")}var d=b?b:12,e=a.currentStyle?a.currentStyle.lineHeight:getComputedStyle(a,null).lineHeight;e=e.indexOf("px")==-1?d:parseInt(e,10),a.style.overflow="hidden",a.addEventListener?a.addEventListener("input",c,!1):a.attachEvent("onpropertychange",c)},MBP.enableActive=function(){a.addEventListener("touchstart",function(){},!1)},MBP.preventScrolling=function(){a.addEventListener("touchmove",function(a){a.preventDefault()},!1)},MBP.preventZoom=function(){var b=a.querySelectorAll("input, select, textarea"),c="width=device-width,initial-scale=1,maximum-scale=",d=0;for(d=0;d<b.length;d++)b[d].onfocus=function(){MBP.viewportmeta.content=c+"1"},b[d].onblur=function(){MBP.viewportmeta.content=c+"10"}},MBP.startupImage=function(){var b,c,d,e,f,g;d=window.devicePixelRatio,e=a.getElementsByTagName("head")[0],navigator.platform==="iPad"?(b=d===2?"img/startup/startup-tablet-portrait-retina.png":"img/startup/startup-tablet-portrait.png",c=d===2?"img/startup/startup-tablet-landscape-retina.png":"img/startup/startup-tablet-landscape.png",f=a.createElement("link"),f.setAttribute("rel","apple-touch-startup-image"),f.setAttribute("media","screen and (orientation: portrait)"),f.setAttribute("href",b),e.appendChild(f),g=a.createElement("link"),g.setAttribute("rel","apple-touch-startup-image"),g.setAttribute("media","screen and (orientation: landscape)"),g.setAttribute("href",c),e.appendChild(g)):(b=d===2?"img/startup/startup-retina.png":"img/startup/startup.png",f=a.createElement("link"),f.setAttribute("rel","apple-touch-startup-image"),f.setAttribute("href",b),e.appendChild(f))}}(document),define("helper",function(){}),function(){var a=this,b=a.Backbone,c=[],d=c.push,e=c.slice,f=c.splice,g;typeof exports!="undefined"?g=exports:g=a.Backbone={},g.VERSION="0.9.9";var h=a._;!h&&typeof require!="undefined"&&(h=require("underscore")),g.$=a.jQuery||a.Zepto||a.ender,g.noConflict=function(){return a.Backbone=b,this},g.emulateHTTP=!1,g.emulateJSON=!1;var i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if(typeof c=="object")for(var e in c)a[b].apply(a,[e,c[e]].concat(d));else{if(!i.test(c))return!0;var f=c.split(i);for(var g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d))}},k=function(a,b,c){var d,e=-1,f=b.length;switch(c.length){case 0:while(++e<f)(d=b[e]).callback.call(d.ctx);return;case 1:while(++e<f)(d=b[e]).callback.call(d.ctx,c[0]);return;case 2:while(++e<f)(d=b[e]).callback.call(d.ctx,c[0],c[1]);return;case 3:while(++e<f)(d=b[e]).callback.call(d.ctx,c[0],c[1],c[2]);return;default:while(++e<f)(d=b[e]).callback.apply(d.ctx,c)}},l=g.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!j(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c),this},off:function(a,b,c){var d,e,f,g,i,k,l,m;if(!this._events||!j(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;g=a?[a]:h.keys(this._events);for(i=0,k=g.length;i<k;i++){a=g[i];if(d=this._events[a]){f=[];if(b||c)for(l=0,m=d.length;l<m;l++)e=d[l],(b&&b!==(e.callback._callback||e.callback)||c&&c!==e.context)&&f.push(e);this._events[a]=f}}return this},trigger:function(a){if(!this._events)return this;var b=e.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(this,c,b),d&&k(this,d,arguments),this},listenTo:function(a,b,c){var d=this._listeners||(this._listeners={}),e=a._listenerId||(a._listenerId=h.uniqueId("l"));return d[e]=a,a.on(b,c||this,this),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return;if(a)a.off(b,c,this),!b&&!c&&delete d[a._listenerId];else{for(var e in d)d[e].off(null,null,this);this._listeners={}}return this}};l.bind=l.on,l.unbind=l.off,h.extend(g,l);var m=g.Model=function(a,b){var c,d=a||{};this.cid=h.uniqueId("c"),this.changed={},this.attributes={},this._changes=[],b&&b.collection&&(this.collection=b.collection),b&&b.parse&&(d=this.parse(d)),(c=h.result(this,"defaults"))&&h.defaults(d,c),this.set(d,{silent:!0}),this._currentAttributes=h.clone(this.attributes),this._previousAttributes=h.clone(this.attributes),this.initialize.apply(this,arguments)};h.extend(m.prototype,l,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return h.clone(this.attributes)},sync:function(){return g.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return this.get(a)!=null},set:function(a,b,c){var d,e;if(a==null)return this;h.isObject(a)?(e=a,c=b):(e={})[a]=b;var f=c&&c.silent,g=c&&c.unset;if(!this._validate(e,c))return!1;this.idAttribute in e&&(this.id=e[this.idAttribute]);var i=this.attributes;for(d in e)b=e[d],g?delete i[d]:i[d]=b,this._changes.push(d,b);return this._hasComputed=!1,f||this.change(c),this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},fetch:function(a){a=a?h.clone(a):{},a.parse===void 0&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d,e,f){if(!b.set(b.parse(d),a))return!1;c&&c(b,d,a)},this.sync("read",this,a)},save:function(a,b,c){var d,e,f;a==null||h.isObject(a)?(d=a,c=b):a!=null&&((d={})[a]=b),c=c?h.clone(c):{};if(c.wait){if(d&&!this._validate(d,c))return!1;e=h.clone(this.attributes)}var g=h.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?g:c))return!1;if(!d&&!this._validate(null,c))return!1;var i=this,j=c.success;c.success=function(a,b,e){f=!0;var g=i.parse(a);c.wait&&(g=h.extend(d||{},g));if(!i.set(g,c))return!1;j&&j(i,a,c)};var k=this.isNew()?"create":c.patch?"patch":"update";k=="patch"&&(c.attrs=d);var l=this.sync(k,this,c);return!f&&c.wait&&(this.clear(g),this.set(e,g)),l},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a)};if(this.isNew())return a.success(),!1;var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||F();return this.isNew()?a:a+(a.charAt(a.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(a){var b=this._changing;this._changing=!0;var c=this._computeChanges(!0);this._pending=!!c.length;for(var d=c.length-2;d>=0;d-=2)this.trigger("change:"+c[d],this,c[d+1],a);if(b)return this;while(this._pending)this._pending=!1,this.trigger("change",this,a),this._previousAttributes=h.clone(this.attributes);return this._changing=!1,this},hasChanged:function(a){return this._hasComputed||this._computeChanges(),a==null?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._previousAttributes;for(var e in a){if(h.isEqual(d[e],b=a[e]))continue;(c||(c={}))[e]=b}return c},_computeChanges:function(a){this.changed={};var b={},c=[],d=this._currentAttributes,e=this._changes;for(var f=e.length-2;f>=0;f-=2){var g=e[f],h=e[f+1];if(b[g])continue;b[g]=!0;if(d[g]!==h){this.changed[g]=h;if(!a)continue;c.push(g,h),d[g]=h}}return a&&(this._changes=[]),this._hasComputed=!0,c},previous:function(a){return a==null||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return h.clone(this._previousAttributes)},_validate:function(a,b){if(!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validate(a,b);return c?(b&&b.error&&b.error(this,c,b),this.trigger("error",this,c,b),!1):!0}});var n=g.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),b.comparator!==void 0&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))};h.extend(n.prototype,l,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){var c,e,g,i,j,k,l=b&&b.at,m=(b&&b.sort)==null?!0:b.sort;a=h.isArray(a)?a.slice():[a];for(c=a.length-1;c>=0;c--){if(!(i=this._prepareModel(a[c],b))){this.trigger("error",this,a[c],b),a.splice(c,1);continue}a[c]=i,j=i.id!=null&&this._byId[i.id];if(j||this._byCid[i.cid]){b&&b.merge&&j&&(j.set(i.attributes,b),k=m),a.splice(c,1);continue}i.on("all",this._onModelEvent,this),this._byCid[i.cid]=i,i.id!=null&&(this._byId[i.id]=i)}a.length&&(k=m),this.length+=a.length,e=[l!=null?l:this.models.length,0],d.apply(e,a),f.apply(this.models,e),k&&this.comparator&&l==null&&this.sort({silent:!0});if(b&&b.silent)return this;while(i=a.shift())i.trigger("add",i,this,b);return this},remove:function(a,b){var c,d,e,f;b||(b={}),a=h.isArray(a)?a.slice():[a];for(c=0,d=a.length;c<d;c++){f=this.get(a[c]);if(!f)continue;delete this._byId[f.id],delete this._byCid[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f)}return this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return a==null?void 0:this._byId[a.id!=null?a.id:a]||this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return h.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return h.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),(!a||!a.silent)&&this.trigger("sort",this,a),this},pluck:function(a){return h.invoke(this.models,"get",a)},update:function(a,b){var c,d,e,f,g=[],i=[],j={},k=this.model.prototype.idAttribute;b=h.extend({add:!0,merge:!0,remove:!0},b),b.parse&&(a=this.parse(a)),h.isArray(a)||(a=a?[a]:[]);if(b.add&&!b.remove)return this.add(a,b);for(d=0,e=a.length;d<e;d++)c=a[d],f=this.get(c.id||c.cid||c[k]),b.remove&&f&&(j[f.cid]=!0),(b.add&&!f||b.merge&&f)&&g.push(c);if(b.remove)for(d=0,e=this.models.length;d<e;d++)c=this.models[d],j[c.cid]||i.push(c);return i.length&&this.remove(i,b),g.length&&this.add(g,b),this},reset:function(a,b){b||(b={}),b.parse&&(a=this.parse(a));for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),a&&this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?h.clone(a):{},a.parse===void 0&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d,e,f){var g=a.update?"update":"reset";b[g](d,a),c&&c(b,d,a)},this.sync("read",this,a)},create:function(a,b){var c=this;b=b?h.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;return b.success=function(a,b,e){e.wait&&c.add(a,e),d&&d(a,b,e)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},chain:function(){return h(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){if(a instanceof m)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:!1},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if((a==="add"||a==="remove")&&c!==this)return;a==="destroy"&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],b.id!=null&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});var o=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortedIndex","toArray","size","first","head","take","initial","rest","tail","last","without","indexOf","shuffle","lastIndexOf","isEmpty"];h.each(o,function(a){n.prototype[a]=function(){var b=e.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var p=["groupBy","countBy","sortBy"];h.each(p,function(a){n.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var q=g.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},r=/\((.*?)\)/g,s=/:\w+/g,t=/\*\w+/g,u=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(q.prototype,l,{initialize:function(){},route:function(a,b,c){return h.isRegExp(a)||(a=this._routeToRegExp(a)),c||(c=this[b]),g.history.route(a,h.bind(function(d){var e=this._extractParameters(a,d);c&&c.apply(this,e),this.trigger.apply(this,["route:"+b].concat(e)),g.history.trigger("route",this,b,e)},this)),this},navigate:function(a,b){return g.history.navigate(a,b),this},_bindRoutes:function(){if(!this.routes)return;var a,b=h.keys(this.routes);while((a=b.pop())!=null)this.route(a,this.routes[a])},_routeToRegExp:function(a){return a=a.replace(u,"\\$&").replace(r,"(?:$1)?").replace(s,"([^/]+)").replace(t,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var v=g.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},w=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,y=/msie [\w.]+/,z=/\/$/;v.started=!1,h.extend(v.prototype,l,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(a==null)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(z,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(w,"")},start:function(a){if(v.started)throw new Error("Backbone.history has already been started");v.started=!0,this.options=h.extend({},{root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var b=this.getFragment(),c=document.documentMode,d=y.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7);this.root=("/"+this.root+"/").replace(x,"/"),d&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?g.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!d?g.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=b;var e=this.location,f=e.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!f)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&f&&e.hash&&(this.fragment=this.getHash().replace(w,""),this.history.replaceState({},document.title,this.root+this.fragment+e.search));if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),v.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe)));if(b===this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0});return c},navigate:function(a,b){if(!v.started)return!1;if(!b||b===!0)b={trigger:b};a=this.getFragment(a||"");if(this.fragment===a)return;this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),g.history=new v;var A=g.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},B=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];h.extend(A.prototype,l,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},make:function(a,b,c){var d=document.createElement(a);return b&&g.$(d).attr(b),c!=null&&g.$(d).html(c),d},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof g.$?a:g.$(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return;this.undelegateEvents();for(var b in a){var c=a[b];h.isFunction(c)||(c=this[a[b]]);if(!c)throw new Error('Method "'+a[b]+'" does not exist');var d=b.match(B),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,f===""?this.$el.bind(e,c):this.$el.delegate(f,e,c)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,C)),this.options=a},_ensureElement:function(){if(!this.el){var a=h.extend({},h.result(this,"attributes"));this.id&&(a.id=h.result(this,"id")),this.className&&(a["class"]=h.result(this,"className")),this.setElement(this.make(h.result(this,"tagName"),a),!1)}else this.setElement(h.result(this,"el"),!1)}});var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=D[a];h.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var e={type:d,dataType:"json"};c.url||(e.url=h.result(b,"url")||F()),c.data==null&&b&&(a==="create"||a==="update"||a==="patch")&&(e.contentType="application/json",e.data=JSON.stringify(c.attrs||b.toJSON(c))),c.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{});if(c.emulateHTTP&&(d==="PUT"||d==="DELETE"||d==="PATCH")){e.type="POST",c.emulateJSON&&(e.data._method=d);var f=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(f)return f.apply(this,arguments)}}e.type!=="GET"&&!c.emulateJSON&&(e.processData=!1);var i=c.success;c.success=function(a,d,e){i&&i(a,d,e),b.trigger("sync",b,a,c)};var j=c.error;c.error=function(a,d,e){j&&j(b,a,c),b.trigger("error",b,a,c)};var k=g.ajax(h.extend(e,c));return b.trigger("request",b,k,c),k},g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var E=function(a,b){var c=this,d;a&&h.has(a,"constructor")?d=a.constructor:d=function(){c.apply(this,arguments)},h.extend(d,c,b);var e=function(){this.constructor=d};return e.prototype=c.prototype,d.prototype=new e,a&&h.extend(d.prototype,a),d.__super__=c.prototype,d};m.extend=n.extend=q.extend=A.extend=v.extend=E;var F=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",["lodash","zepto"],function(a){return function(){return a.Backbone}}(this)),function(a){function b(a,b){var c=(a&65535)+(b&65535),d=(a>>16)+(b>>16)+(c>>16);return d<<16|c&65535}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<a.length*32;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];c[(a.length>>2)-1]=undefined;for(b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<a.length*8;b+=8)c[b>>5]|=(a.charCodeAt(b/8)&255)<<b%32;return c}function l(a){return j(i(k(a),a.length*8))}function m(a,b){var c,d=k(a),e=[],f=[],g;e[15]=f[15]=undefined,d.length>16&&(d=i(d,a.length*8));for(c=0;c<16;c+=1)e[c]=d[c]^909522486,f[c]=d[c]^1549556828;return g=i(e.concat(k(b)),512+b.length*8),j(i(f.concat(g),640))}function n(a){var b="0123456789abcdef",c="",d,e;for(e=0;e<a.length;e+=1)d=a.charCodeAt(e),c+=b.charAt(d>>>4&15)+b.charAt(d&15);return c}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}typeof define=="function"&&define.amd?define("hash",[],function(){return t}):a.md5=t}(this),define("facade",["zepto","lodash","backbone","hash"],function(a,b,c,d){return a.ajaxSettings.cache=!1,{$:Zepto,_:b,Backbone:c,hash:d}}),define("env",["facade"],function(a){var b=a._,c,d=window.location.host,e=window.location.protocol+"//",f="ec2-107-21-189-43.compute-1.amazonaws.com:8080";return c={production:{client:"www.clean-or-dirty.com",server:f},prod:{client:"clean-or-dirty.com",server:f},awsprod:{client:"www.clean-or-dirty.com.s3-website-us-east-1.amazonaws.com",server:f},awsdev:{client:"cleanordirty.s3-website-us-east-1.amazonaws.com",server:f},localdev:{client:"precise64:3501",server:"precise64:2403"},"default":{client:d,server:f},api:{appliances:"/appliances"},current:null},d===c.production.client?c.current=c.production:d===c.prod.client?c.current=c.prod:d===c.awsprod.client?c.current=c.awsprod:d===c.awsdev.client?c.current=c.awsdev:d===c.localdev.client?c.current=c.localdev:c.current=c.default,c.current.api={},b.each(c.api,function(a,b,d){c.current.api[b]=e+c.current.server+a}),c.current}),define("location/model",["facade","env"],function(a,b){var c,d=a._,e=a.Backbone,f=a.hash;return c=e.Model.extend({defaults:{ref:null,accuracy:null,attempts:0,latitude:null,longitude:null,name:null},initialize:function(){d.bindAll(this,"geoLocationSuccessHandler","geoLocationErrorHandler"),this.on("geoLocationSuccess",this.getAddressWithGeoLocation,this),this.on("change:name",this.setRef,this),this.geoLocation()},geoLocation:function(){var a=this,b=a.get("attempts");if(!(Modernizr.geolocation&&b<c.MAX_ATTEMPTS))throw"no browser support, or exceeded max attempts";console.log("geoLocation attempts: "+b),navigator.geolocation.getCurrentPosition(function(){a.geoLocationSuccessHandler.apply(a,arguments)},function(){a.geoLocationErrorHandler.apply(a,arguments)},{enableHighAccuracy:!0})},geoLocationSuccessHandler:function(a){var b=this,e=b.get("attempts"),f=a.coords.accuracy,g=b.get("accuracy"),h=a.coords.latitude,i=a.coords.longitude;console.log("accuracy: "+f),f>c.MAX_ACCURACY?(setTimeout(function(){b.geoLocation()},c.RETRY_DELAY),e++,b.set({attempts:e,accuracy:f},{silent:!0}),(f<g||d.isNull(g))&&b.set({latitude:h,longitude:i},{silent:!0}),e===c.MAX_ATTEMPTS&&b.trigger("geoLocationSuccess")):(b.set({attempts:0,accuracy:f,latitude:h,longitude:i}),b.trigger("geoLocationSuccess"))},geoLocationErrorHandler:function(a){var b=this,d=this.get("attempts");d++,b.set({attempts:d},{silent:!0}),setTimeout(function(){b.geoLocation()},c.RETRY_DELAY),console.dir(a)},getAddressWithGeoLocation:function(a){var b=this.get("latitude"),c=this.get("longitude"),d=a||this,e=new google.maps.Geocoder,f=new google.maps.LatLng(b,c),g;e.geocode({latLng:f},function(a,b){b===google.maps.GeocoderStatus.OK?a[0]&&(g=a[0].address_components[0].short_name,console.log("name: "+g),d.set({name:g,addr:a[0].formatted_address},{silent:!1})):console.log("Geocode was not successful for the following reason: "+b)})},setRef:function(a){var b={},c=new e.Model,g=a||this;b.last=g.previous("ref"),b.name=g.get("name"),b.addr=g.get("addr"),b.short=b.addr.replace(/\s|,|[rstlnaeiou]|[AEIOU]|[\-\+]/g,""),d.each(["latitude","longitude"],function(a){b[a]=Math.round(g.get(a)*10).toString()}),b.hash=f(b.latitude+b.short+b.longitude),this.set({ref:b.hash,name:b.name,meta:b},{silent:!0}),b.last!==b.hash&&(c.set({ref:b.hash,name:b.name,meta:b},{silent:!0}),e.trigger("LocationModelRefChange",c))},setName:function(a){this.set({name:a},{silent:!0})}},{MAX_ATTEMPTS:3,MAX_ACCURACY:200,RETRY_DELAY:300}),c}),define("appliances/model",["facade","env"],function(a,b){var c,d=a._,e=a.Backbone;return c=e.Model.extend({defaults:{ref:null,state:null},urlRoot:b.api.appliances,initialize:function(){this.on("persist",this.save,this)},setSubscriber:function(a){var b=this,e=0;d.each(c.DEFAULTS,function(c){var f=a.get(c);a.has(c)&&!d.isNull(f)&&(b.set(c,f),e++)}),e>0&&(b.timeout&&window.clearTimeout(b.timeout),b.timeout=setTimeout(function(){b.trigger("persist")},100))},save:function(a,b){!d.isNull(this.get("ref"))&&!d.isNull(this.get("state"))&&(b=b||{wait:!0},a=a||this.toJSON(),e.Model.prototype.save.call(this,a,b))}},{DEFAULTS:["ref","state","name"]}),c}),define("appliances/collection",["facade","env","appliances/model"],function(a,b,c){var d,e=a._,f=a.Backbone;return d=f.Collection.extend({model:c,url:b.api.appliances,initialize:function(){var a=this;e.bindAll(this,"fetchByRef","findAppliance"),a.add({},{silent:!0}),f.on("LocationModelRefChange",a.fetchByRef,a),a.on("fetchByRefSuccess",function(b){a.CURRENTLOCATION=b,a.each(function(b){b.id||a.remove(b,{silent:!0})}),f.trigger("ApplianceCollectionFoundRef",b)},a)},fetchByRef:function(a){var b=this,c=a.get("ref");b.fetch({url:b.url+'?{"ref": "'+c+'"}',success:function(a,b){var d;console.log("fetchByRefSuccess..."),console.dir(b),e.isArray(b)&&(b.length===0&&a.create({ref:c,state:"Clean"}),d=a.pop(),a.reset(),a.trigger("fetchByRefSuccess",d))},error:function(a,b,c){console.log("fetchByRef Error..."),console.dir(b)}})},findAppliance:function(){var a=this,b,c,d;if(!a.CURRENTLOCATION)throw new Error("CURRENTLOCATION must be set");return d=a.CURRENTLOCATION.get("ref"),c=a.find(function(a){var b=a.get("ref");return b===d}),c?b=c:b=a.at(0),f.trigger("ApplianceCollectionFoundRef",b),b}}),d}),define("status/model",["facade"],function(a){var b=a.Backbone,c;return c=b.Model.extend({defaults:{clean:null,dirty:null,state:null},initialize:function(){var a=this;a.set({clean:c.CLEAN,dirty:c.DIRTY},{silent:!0}),a.on("toggleState",a.toggleState,a),a.on("change:state",function(){var c=a.previous("state");c&&a.changed.state!==c&&b.trigger("applianceStateChange",a)},a)},toggleState:function(){var a,b=this.get("state");b===c.CLEAN||_.isNull(b)?a=c.DIRTY:b===c.DIRTY&&(a=c.CLEAN),this.set({state:a},{silent:!1})}},{CLEAN:"Clean",DIRTY:"Dirty"}),c}),define("status/view",["facade","status/model"],function(a,b){var c=a.$,d=a._,e=a.Backbone;return e.View.extend({el:"#content",events:{tap:"toggleState"},initialize:function(){d.bindAll(this,"toggleState"),this.model=this.model||new b,this.model.on("change:state",function(){var a,c;a=d.isNull(this.model.previous("state")),c=this.model.changed.state===b.DIRTY,(!a||a&&c)&&this.flipView()},this)},render:function(){var a=this.model.toJSON();this.template=d.template(c("#status").html()),this.$el.hide().html(this.template(a)),a.state===b.DIRTY&&this.flipView(),this.$el.show()},toggleState:function(){this.model.trigger("toggleState")},flipView:function(){var a=this.$(".status");a.hasClass("flip")?a.removeClass("flip"):a.addClass("flip")}})}),define("about/view",["facade"],function(a){var b=a.$,c=a._,d=a.Backbone;return d.View.extend({el:"#page",initialize:function(){this.template=c.template(b("#about").html())},render:function(){this.$el.html(this.template({}))}})}),define("privacy/view",["facade"],function(a){var b=a.$,c=a._,d=a.Backbone;return d.View.extend({el:"#page",initialize:function(){this.template=c.template(b("#privacy").html())},render:function(){this.$el.html(this.template({}))}})}),define("settings/view",["facade"],function(a){var b=a.$,c=a._,d=a.Backbone;return d.View.extend({el:"#page",initialize:function(){this.template=c.template(b("#settings").html())},render:function(){this.$el.html(this.template({}))}})}),define("app",["facade","location/model","appliances/collection","status/view","about/view","privacy/view","settings/view"],function(a,b,c,d,e,f,g){var h=a._,i=a.Backbone,j={};return h.templateSettings={evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{(.+?)\}\}/g},j.locationModel=new b,j.appliancesList=new c,j.statusView=new d,j.aboutView=new e,j.privacyView=new f,j.settingsView=new g,i.on("LocationModelRefChange",function(a){console.log("LocationModelRefChange: "+a.get("ref")),j.statusView.model.set({ref:a.get("ref"),name:a.get("name"),meta:a.toJSON()},{silent:!1})}),i.on("ApplianceCollectionFoundRef",function(a){var b=a.get("ref"),c=a.get("state");!h.isNull(b)&&!h.isNull(c)&&(console.log("applianceCollectionFoundRef, ref: "+b,", state: "+c),j.currentAppliance=a,j.statusView.model.set({state:c},{silent:!1}),i.on("applianceStateChange",j.currentAppliance.setSubscriber,j.currentAppliance))}),$("#checkStatus").on("tap",function(a){a.preventDefault(),j.currentAppliance.fetch({success:function(a){j.statusView.model.set({state:a.get("state")},{silent:!1})},error:function(){alert("Could not get status :(")}})}),j}),define("router",["facade","app"],function(a,b){var c,d=a._,e=a.$,f=a.Backbone;return c=f.Router.extend({routes:{"":"index",about:"about",privacy:"privacy",settings:"settings"},initialize:function(){this.on("all",this.all)},all:function(a){var b=f.history.fragment;console.log("route: "+a),d.isFunction(this[b])?(e("#content").empty(),this[b]()):(e("#page").empty(),this.index())},index:function(){b.statusView.render()},about:function(){b.aboutView.render()},privacy:function(){b.privacyView.render()},settings:function(){b.settingsView.render()}}),c}),require(["facade","router"],function(a,b){var c,d=a.$,e=a.Backbone;c=new b,e.history.start({pushState:!1,root:"/"}),d(document).on("tap","a:not([data-bypass])",function(a){var b=d(this).attr("href");b&&b.indexOf("#")===0&&(a.preventDefault(),e.history.navigate(b,!0))}),window.addEventListener("load",function(){setTimeout(function(){window.scrollTo(0,1)},0)})}),define("bootstrap",function(){}),require.config({deps:["lodash","zepto","helper","facade","bootstrap"],paths:{env:"../scripts/env",libs:"../scripts/libs",plugins:"../scripts/plugins",backbone:"../scripts/libs/backbone",lodash:"../scripts/libs/lodash",modernizr:"../scripts/libs/modernizr.min",zepto:"../scripts/libs/zepto",hash:"../scripts/libs/md5",appliances:"../scripts/appliances",location:"../scripts/location",status:"../scripts/status"},shim:{zepto:{exports:"$"},lodash:{exports:"_"},backbone:{deps:["lodash","zepto"],exports:"Backbone"}}}),define("config",function(){})}();